dist: trusty
language: node_js
sudo: false

node_js:
  - "6"
  - "8"

cache:
  yarn: true
  directories:
    - node_modules

env:
  - RUN_TESTS=true
  - RUN_FLOW=true

before_install:
  - "yarn --version"

install:
  - "yarn install --pure-lockfile --no-emoji"

script:
  - if [ -n "$RUN_FLOW" ]; then yarn flow; fi
  - if [ -n "$RUN_TESTS" ]; then yarn test -- --coverage --verbose; fi

after_script:
  - if [ -n "$RUN_TESTS" ]; then yarn codecov; fi
